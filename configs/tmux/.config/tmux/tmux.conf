# Steve's Minimal Tmux Config
# Philosophy: Stock tmux + Zellij-style Alt bindings + Catppuccin theme
# Customize as friction is discovered, not upfront

# =============================================================================
# PREFIX
# =============================================================================
set -g prefix C-a
unbind C-b
bind C-a send-prefix

# =============================================================================
# TERMINAL SETTINGS
# =============================================================================
set -g default-terminal "tmux-256color"
set -ga terminal-overrides ",*256col*:Tc"    # True color support
set -ga terminal-overrides ",xterm-256color:Tc"
set -ga terminal-overrides ",alacritty:Tc"
set -ga terminal-overrides ",xterm-ghostty:Tc"

set -sg escape-time 0          # No delay for escape key (Vim responsiveness)
set -g history-limit 100000    # Generous scrollback
set -g mouse on                # Mouse support
set -g base-index 1            # Windows start at 1
set -g pane-base-index 1       # Panes start at 1
set -g renumber-windows on     # Renumber windows when one is closed
set -g display-time 2000       # Status messages display time
set -g display-panes-time 3000 # Pane numbers display time

# =============================================================================
# ZELLIJ-STYLE KEYBINDINGS (Alt + key, no prefix needed)
# =============================================================================

# Navigation: Alt + h/j/k/l (vim style)
bind -n M-h select-pane -L
bind -n M-j select-pane -D
bind -n M-k select-pane -U
bind -n M-l select-pane -R

# Navigation: Alt + arrows (also supported)
bind -n M-Left select-pane -L
bind -n M-Down select-pane -D
bind -n M-Up select-pane -U
bind -n M-Right select-pane -R

# Split creation: Alt + d/r (down/right, like Zellij)
bind -n M-d split-window -v -c "#{pane_current_path}"
bind -n M-r split-window -h -c "#{pane_current_path}"

# New window: Alt + t (like Zellij new tab)
bind -n M-t new-window -c "#{pane_current_path}"

# Window navigation: Alt + [ and ] (like Zellij tab nav)
bind -n 'M-[' previous-window
bind -n 'M-]' next-window

# Zoom pane: Alt + f (like Zellij fullscreen toggle)
bind -n M-f resize-pane -Z

# Close pane: Alt + x
bind -n M-x kill-pane

# Resize: Alt + Shift + h/j/k/l
bind -n M-H resize-pane -L 5
bind -n M-J resize-pane -D 5
bind -n M-K resize-pane -U 5
bind -n M-L resize-pane -R 5

# Equalize panes: Alt + =
bind -n 'M-=' select-layout tiled

# =============================================================================
# PREFIX KEYBINDINGS (for less common actions)
# =============================================================================

# Reload config
bind r source-file ~/.config/tmux/tmux.conf \; display "Config reloaded"

# Split with prefix (traditional, also available)
bind v split-window -h -c "#{pane_current_path}"
bind h split-window -v -c "#{pane_current_path}"

# Session management
bind s choose-tree -Zs          # Session picker
bind w choose-tree -Zw          # Window picker

# Popup terminal (like Zellij floating pane) - tmux 3.2+
bind p display-popup -E -w 80% -h 80%

# =============================================================================
# CATPPUCCIN MACCHIATO THEME (no plugin, just colors)
# =============================================================================

# Palette
# Base: #24273a | Surface0: #363a4f | Surface1: #494d64
# Text: #cad3f5 | Subtext0: #a5adcb
# Mauve: #c6a0f6 | Blue: #8aadf4 | Teal: #8bd5ca | Green: #a6da95

# Status bar
set -g status-position bottom
set -g status-style "bg=#24273a,fg=#cad3f5"
set -g status-left-length 40
set -g status-right-length 40
set -g status-left "#[bg=#8aadf4,fg=#24273a,bold] #S #[bg=#24273a] "
set -g status-right "#[fg=#a5adcb]%H:%M #[bg=#8aadf4,fg=#24273a,bold] #h "

# Window status
set -g window-status-format "#[fg=#a5adcb] #I:#W "
set -g window-status-current-format "#[bg=#363a4f,fg=#8aadf4,bold] #I:#W "
set -g window-status-separator ""

# Pane borders
set -g pane-border-style "fg=#494d64"
set -g pane-active-border-style "fg=#8aadf4"

# Message style
set -g message-style "bg=#363a4f,fg=#cad3f5"

# Mode style (copy mode, etc)
set -g mode-style "bg=#363a4f,fg=#cad3f5"
