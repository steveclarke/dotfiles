#!/usr/bin/env bash

is_installed() {
  command -v "$1" >/dev/null 2>&1
}

banner() {
  echo "=== $1 "
}

skipping() {
  echo "=== skipping $1 - already installed"
}

# [[ Homebrew ]]
if ! is_installed brew; then
  banner "Installing Homebrew"

  /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
  and cd ~/dotfiles && brew bundle
else
  skipping "Homebrew"
fi

# [[ fish ]]
if ! is_installed fish; then
  banner "Installing fish"

  sudo apt-add-repository ppa:fish-shell/release-3
  sudo apt update
  sudo apt install fish
else
  skipping "fish"
fi

# [[ asdf ]]
if ! test -d ~/.asdf; then
  banner "Installing asdf"

  git clone https://github.com/asdf-vm/asdf.git ~/.asdf --branch v0.13.1
else
  skipping "asdf"
fi
